<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard - Quiz App</title>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="header">
        <h1>ğŸ“š Quiz App - Admin Dashboard</h1>
        <div class="user-info">
          <span class="user-badge"
            >ğŸ‘¤ <span th:text="${currentUser.username}">Admin</span></span
          >
          <a href="/logout" class="logout-btn">Logout</a>
        </div>
      </div>

      <!-- Success/Error Messages -->
      <div th:if="${param.success}" class="alert alert-success">
        <span th:if="${param.success[0] == 'student_created'}"
          >âœ“ Student account created successfully!</span
        >
        <span th:if="${param.success[0] == 'student_deleted'}"
          >âœ“ Student deleted successfully!</span
        >
      </div>
      <div th:if="${param.error}" class="alert alert-error">
        <span th:if="${param.error[0] == 'username_exists'}"
          >âœ— Username already exists!</span
        >
        <span th:if="${param.error[0] == 'cannot_delete'}"
          >âœ— Cannot delete this student!</span
        >
      </div>

      <!-- Statistics -->
      <div class="stats">
        <div class="stat-card">
          <h3>TOTAL STUDENTS</h3>
          <div class="number" th:text="${totalStudents}">0</div>
        </div>
        <div class="stat-card">
          <h3>TOTAL QUIZZES</h3>
          <div class="number" th:text="${totalQuizzes}">0</div>
        </div>
      </div>

      <!-- Create Student Form -->
      <div class="section">
        <h2>â• Create Student Account</h2>
        <form action="/admin/create-student" method="post">
          <div class="form-group">
            <label for="student-username">Username:</label>
            <input type="text" id="student-username" name="username" required />
          </div>
          <div class="form-group">
            <label for="student-password">Password:</label>
            <input
              type="password"
              id="student-password"
              name="password"
              required
            />
          </div>
          <div class="form-group">
            <label for="student-fullname">Full Name:</label>
            <input type="text" id="student-fullname" name="fullName" />
          </div>
          <div class="form-group">
            <label for="student-email">Email:</label>
            <input type="email" id="student-email" name="email" />
          </div>
          <button type="submit" class="btn btn-primary">Create Student</button>
        </form>
      </div>

      <!-- Students List -->
      <div class="section">
        <h2>ğŸ‘¨â€ğŸ“ Student Accounts</h2>
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Username</th>
              <th>Full Name</th>
              <th>Email</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="student : ${students}">
              <td th:text="${student.id}">1</td>
              <td th:text="${student.username}">student1</td>
              <td th:text="${student.fullName}">Jane Doe</td>
              <td th:text="${student.email}">student@example.com</td>
              <td>
                <form
                  action="#"
                  th:action="@{/admin/delete-student/{id}(id=${student.id})}"
                  method="post"
                  style="display: inline"
                  onsubmit="return confirm('Are you sure you want to delete this student?');"
                >
                  <button type="submit" class="btn btn-danger">Delete</button>
                </form>
              </td>
            </tr>
            <tr th:if="${#lists.isEmpty(students)}">
              <td colspan="5" style="text-align: center; color: #999">
                No students created yet
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Quizzes List -->
      <div class="section">
        <h2>ğŸ“ Quizzes</h2>
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Quiz Title</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="quiz : ${quizzes}">
              <td th:text="${quiz.id}">1</td>
              <td th:text="${quiz.title}">Sample Quiz</td>
              <td th:text="${quiz.description}">Quiz description</td>
            </tr>
            <tr th:if="${#lists.isEmpty(quizzes)}">
              <td colspan="3" style="text-align: center; color: #999">
                No quizzes available
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </body>
</html>
